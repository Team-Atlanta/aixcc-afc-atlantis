--- a/fs/ext4/xattr.c
+++ b/fs/ext4/xattr.c
@@ -2722,7 +2722,7 @@
 
 retry:
 	isize_diff = new_extra_isize - EXT4_I(inode)->i_extra_isize;
-	if (EXT4_I(inode)->i_extra_isize >= new_extra_isize)
+	if (isize_diff <= 0)
 		return 0;
 
 	header = IHDR(inode, raw_inode);
