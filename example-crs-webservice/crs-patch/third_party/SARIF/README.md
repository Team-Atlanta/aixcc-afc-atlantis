# CRS-SARIF
This repository contains all the code related to SARIF, including CRS-SARIF, sarif-generation, sarif-validation, reachability analysis, benchmark creation, and benchmarks, etc...

## Running CRS-SARIF in local
You can test the CRS-SARIF in local by running the unified script.

```bash
python crs_test.py --project-name <project-name> --project-language <project-language> --original-oss-fuzz-dir <original-oss-fuzz-dir> --working-oss-fuzz-dir <working-oss-fuzz-dir> --crs-test-dir <crs-test-dir> --tarball-dir <tarball-dir> --run-docker-build --run-sarif-build --run-crs
```

After running the CRS-SARIF docker, you can test the CRS-SARIF by passing the sarif report using following command.

```bash
python test_crs_sarif.py -s <sarif-report-path>
```

If you want to run the CRS-SARIF one by one, you can run the following commands.

1. Build the docker images
```bash
bash ./docker-build.sh
```
2. Build codeql db, joern cpg, and SVF dot, etc in CP-MANAGER
```bash
# Fill the .env file with the correct values
cp .env.sarif_builder .env
python build.py
```
3. Run CRS-SARIF
```bash
# Fill the .env.crs_test file with the correct values
cp .env.crs_sarif .env.crs_test
docker compose up --build
```

4. Test sarif validation
```bash
python test_crs_sarif.py -s <sarif-report-path> -d <crs-sarif-docker-container-id>
```
You can check the docker compose logs and 'sarif_analysis.json' file to see the reachability analysis results.



## Repo Structure
<pre>
📂 Project Structure
 ├── 📁 crs_sarif: CRS SARIF using sarif package
 ├── 📁 api: HTTP API tools for communication between VAPI and crs-sarif
 ├── 📁 sarif: Main package. Contains code for generator, validator, reachability analysis, benchmark creation, etc.
 ├── 📁 sast: Static Application Security Testing code for benchmark generation
 ├── 📁 sootup: Sootup code for callgraph generation
 ├── 📁 tracer: Tracer code for getting call traces from seed or pov
 ├── 📁 benchmarks: Benchmarks for SARIF validation generated by SAST

</pre>

## SARIF package
- Main package for SARIF generation and validation
- [docs](./sarif/README.md)

## SAST
- SAST tool execution environment for creating SARIF validation benchmarks
- [docs](./sast/README.md)

## Benchmarks
- Benchmarks for SARIF validation
- SARIF reports generated using `pov to sarif (sarif generator)`, `commercial SAST`, and `custom generation (simple modification based on TP)` methods for all aixcc benchmarks
- TP: `pov to sarif results`
- FP: `all other sarif reports` except those that have the same semantic meaning as TP

## Sootup
- Sootup code for callgraph generation
- [docs](./sootup/README.md)

## Tracer
- Tracer code for getting call traces from seed or pov
- [docs](./tracer/README.md)